#!/bin/bash

# With no arguments, this script must install from an unpacked tgz.

PRE=$1

BIN=$PRE/usr/bin
DOC=$PRE/usr/share/doc/code_crusader
LIB=$PRE/usr/lib/jxcb
APP=$PRE/usr/share/applications
ICON=$PRE/usr/share/pixmaps

if [[ ! -z $PRE ]]; then
	mkdir -p $BIN $APP $ICON;
fi

# jcc

install -m755 jcc                    $BIN
install -m755 macros/xml-auto-close  $BIN
install -m755 macros/html-auto-close $BIN

ln -sf jcc $BIN/code_crusader

mkdir -p $LIB
cp -R project_templates $LIB
cp -R scripts           $LIB

mkdir -p $DOC
cp README.md menu_strings $DOC
cp -R macros              $DOC
cp -R CPM_rules           $DOC

cp desktop/code_crusader.desktop $APP/
cp desktop/code_crusader.xpm     $ICON/
